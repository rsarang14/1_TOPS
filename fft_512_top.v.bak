// Inside your Top-Level FFT Module
module fft_512_top (
    input clk, 
    input reset,
    // ... other ports ...
);

    wire [7:0]  twiddle_addr; // Generated by the FSM/Control Logic
    wire [15:0] w_real, w_imag;

    // --- THIS IS WHERE THE ROM IS CALLED ---
    twiddle_rom_512 rom_inst (
        .addr(twiddle_addr), // The FSM tells the ROM which "angle" to provide
        .wr(w_real),         // Output goes to Butterfly input 'wr'
        .wi(w_imag)          // Output goes to Butterfly input 'wi'
    );

    // The Butterfly is called right next to it
    butterfly_512 butterfly_inst (
        .ar(data_a_re), .ai(data_a_im),
        .br(data_b_re), .bi(data_b_im),
        .wr(w_real),    .wi(w_imag), // Twiddle values from ROM are used here
        .yr0(out0_re),  .yi0(out0_im),
        .yr1(out1_re),  .yi1(out1_im)
    );

endmodule